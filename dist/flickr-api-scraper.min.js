function init(){"use strict";handleAPI()}function bindEvents(){"use strict";var detailTriggers=$("[data-open-detail]"),listingTriggers=$("[data-open-listing]"),templates={detail:$("#template-detail"),listing:$("#template-listing")};toggleTemplate(templates.detail,templates.listing,!1),0!==detailTriggers.length&&detailTriggers.on("click",function(event){toggleTemplate(templates.listing,templates.detail,event)}),0!==listingTriggers.length&&listingTriggers.on("click",function(event){toggleTemplate(templates.detail,templates.listing,event,!0)})}function toggleTemplate(current,next,event,previous){"use strict";if(current.hide(),next.fadeIn(),event){var trails=$("[js-trail]");trails.removeAttr("js-trail"),$(event.target).attr("js-trail",""),handleFocus(previous?trails:next)}}function handleFocus(target){"use strict";target.attr("tabindex","-1").focus()}function handleAPI(){"use strict";var loadingIcon=$("[data-loading]"),wrapper=$("[data-feed-wrapper]"),container=$("[data-feed-container]",wrapper);container.hide(),loadingIcon.addClass("js-is-visible"),$.getJSON("https://api.flickr.com/services/feeds/photos_public.gne?tags=potato&tagmode=all&format=json&jsoncallback=?",function(data){var feedMarkup={author:"[data-feed-author]",date_taken:"[data-feed-date]",description:"[data-feed-desc]",link:"[data-feed-reference]",list:$("[data-feed-list]",wrapper),media:"[data-feed-img]",tags:"[data-feed-tag-list]",title:"[data-feed-title]",titleBtn:"[data-feed-title-btn]",time_taken:"[data-feed-time]"},responseItems=data.items,responseLength=responseItems.length,count=0;for(count;count<responseLength-1;count++){var clonedContainer=container;0===count&&clonedContainer.show(),clonedContainer=clonedContainer.clone(),feedMarkup.list.append(clonedContainer)}$.each(responseItems,function populateItem(index,item){var listItem,responseItem,wrapper;if(!1===index)listItem=item,responseItem=item.data("js-response"),wrapper=$(".template-detail");else{listItem=$("[data-feed-container]").get(index),responseItem=$(item).get(0),wrapper=listItem}var responseTime,responseDate=responseItem.published,responseAuthor=responseItem.author,authorURL="//www.flickr.com/photos/"+responseItem.author_id,detailTriggers=$("[data-open-detail]",wrapper),titleId="feed__title-"+index;if(void 0===$(listItem).data("js-response")&&$(listItem).data("js-response",item),responseDate=new Date(responseDate),responseTime=responseDate,responseDate=dateFormat(responseDate,"d mmm yyyy"),responseTime=dateFormat(responseTime,"h:MM"),responseAuthor=responseAuthor.substring(responseAuthor.indexOf("(")+2,responseAuthor.lastIndexOf(")")-1),$(feedMarkup.title,wrapper).attr("id",titleId),$(feedMarkup.titleBtn,wrapper).html(responseItem.title),$(feedMarkup.media,wrapper).attr({src:responseItem.media.m,alt:responseItem.title}),$(feedMarkup.link,wrapper).attr({"aria-describedby":titleId,href:responseItem.link}),$(feedMarkup.date_taken,wrapper).html(responseDate),$(feedMarkup.time_taken,wrapper).html(responseTime),$(feedMarkup.author,wrapper).attr("href",authorURL).html(responseAuthor),0!==$(feedMarkup.description,wrapper).length&&$(feedMarkup.description,wrapper).html(responseItem.description),0!==$(feedMarkup.tags,wrapper).length){var tagMarkup,responseTags=responseItem.tags,readInitialTags=[],readMoreTags=[],markupTags=$(feedMarkup.tags,wrapper),tagUrl="https://www.flickr.com/photos/tags/",listMarkup='<li class="tags__list-item"></li>';(responseTags=responseTags.split(" ")).length>12&&(readInitialTags=responseTags.slice(0,12),readMoreTags=responseTags.slice(12),responseTags=readInitialTags),$.each(responseTags,function(index,tag){var listItem=$(listMarkup);tagMarkup='<a href="'+tagUrl+tag+'">'+tag+"</a>",listItem.append(tagMarkup),markupTags.append(listItem)}),0!==readMoreTags.length&&(markupTags.after("<ul data-read-more></ul>"),$.each(readMoreTags,function(index,tag){var listItem=$(listMarkup);tagMarkup='<a href="'+tagUrl+tag+'">'+tag+"</a>",listItem.append(tagMarkup),$("[data-read-more]").append(listItem)}),initHideShow())}detailTriggers.on("click",function(){var container=$(this).parents("[data-feed-container]");populateItem(!1,container)})}),wrapper.addClass("js-is-populated"),loadingIcon.removeClass("js-is-visible"),bindEvents()})}function initHideShow(){"use strict";var readMoreComponents=$("[data-read-more]");0!==readMoreComponents.length&&readMoreComponents.hideShow({hideText:"Less tags",showText:"More tags",speed:"300",state:"hidden"})}init();
//# sourceMappingURL=flickr-api-scraper.map